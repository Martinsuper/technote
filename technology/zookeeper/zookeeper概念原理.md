# zookeeper 相关概念和原理
> * zookeeper是什么？
> zookeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，它是集群的管理者，监视着集群中各个节点的状态根据节点提交的反馈进行下一步合理操作。zookeeper意思是动物园管理员
> * zookeeper用来干什么？
> 文件系统，通知机制

## 分布式系统存在问题
## 分布式系统特征
* 分布性
* 对等性
* 并发性
* 缺乏全局时钟
* 故障总是会发生
### 主从应用可能发生的问题
* 通信异常
* 网络分区
* 三态（成功，失败，超时）
* 节点故障
#### 主节点崩溃
主节点崩溃的时候，从节点要接管主节点的角色并进行故障转移，新的主节点需要回复到旧的主节点崩溃时的状态，但是对于崩溃的信息已经不能从崩溃的服务器获取了，需要从其他地方获取，这里可以从zookeeper获取。
但是可能出现主节点有效，但是备份主节点却认为主节点已经崩溃了，如果从节点无法与主要主节点通信，而与第二个主节点建立主从关系，就产生了脑裂，系统中两个或多个部分开始独立工作，就像是春秋战国时期，各个国家各自为政，建立自己的政权，东周无力约束各个诸侯。
#### 从节点崩溃
从节点崩溃产生的问题是，把已经派发给从节点的任务重新派发，主节点能检测从节点的状态，并确定哪些从节点是否有效以便派发崩溃节点的任务。
#### 通信故障
重新分配一个任务可能会导致两个从节点执行相同的任务，需要判断一个任务是否允许多次执行。

## ACID
ACID,即原子性（Atomicity） 
